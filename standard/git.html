<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git规范 | 全栈小白开发手册</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/standards-recommendations/miaomiao.png">
    <meta name="description" content="全栈小白开发手册">
    <link rel="preload" href="/standards-recommendations/assets/css/0.styles.8d4e3822.css" as="style"><link rel="preload" href="/standards-recommendations/assets/js/app.bcf4ed73.js" as="script"><link rel="preload" href="/standards-recommendations/assets/js/2.3f93e23a.js" as="script"><link rel="preload" href="/standards-recommendations/assets/js/19.8a5ec652.js" as="script"><link rel="prefetch" href="/standards-recommendations/assets/js/10.735e44fb.js"><link rel="prefetch" href="/standards-recommendations/assets/js/11.f11566a6.js"><link rel="prefetch" href="/standards-recommendations/assets/js/12.045865df.js"><link rel="prefetch" href="/standards-recommendations/assets/js/13.f5480009.js"><link rel="prefetch" href="/standards-recommendations/assets/js/14.a632d6e9.js"><link rel="prefetch" href="/standards-recommendations/assets/js/15.2efff12c.js"><link rel="prefetch" href="/standards-recommendations/assets/js/16.7dca55b4.js"><link rel="prefetch" href="/standards-recommendations/assets/js/17.004ca16f.js"><link rel="prefetch" href="/standards-recommendations/assets/js/18.f19dba22.js"><link rel="prefetch" href="/standards-recommendations/assets/js/20.efd019e7.js"><link rel="prefetch" href="/standards-recommendations/assets/js/3.66ef7593.js"><link rel="prefetch" href="/standards-recommendations/assets/js/4.48372d2b.js"><link rel="prefetch" href="/standards-recommendations/assets/js/5.ce53fc23.js"><link rel="prefetch" href="/standards-recommendations/assets/js/6.e602d112.js"><link rel="prefetch" href="/standards-recommendations/assets/js/7.a0f81c0e.js"><link rel="prefetch" href="/standards-recommendations/assets/js/8.7b5b2d3e.js"><link rel="prefetch" href="/standards-recommendations/assets/js/9.4f138ef6.js">
    <link rel="stylesheet" href="/standards-recommendations/assets/css/0.styles.8d4e3822.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/standards-recommendations/" class="home-link router-link-active"><img src="/standards-recommendations/miaomiao.png" alt="全栈小白开发手册" class="logo"> <span class="site-name can-hide">全栈小白开发手册</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/standards-recommendations/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="规范" class="dropdown-title"><span class="title">规范</span> <span class="arrow down"></span></button> <button type="button" aria-label="规范" class="mobile-dropdown-title"><span class="title">规范</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/developer.html" class="nav-link">
  Developer
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/git.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/html.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/vuejs.html" class="nav-link">
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/eggjs.html" class="nav-link">
  Egg.js
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/mysql.html" class="nav-link">
  MySql
</a></li></ul></div></div><div class="nav-item"><a href="/standards-recommendations/library/" class="nav-link">
  代码库
</a></div><div class="nav-item"><a href="/standards-recommendations/case/" class="nav-link">
  典型案例
</a></div><div class="nav-item"><a href="/standards-recommendations/about/" class="nav-link">
  关于
</a></div> <a href="https://github.com/hilanmiao/standards-recommendations" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/standards-recommendations/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="规范" class="dropdown-title"><span class="title">规范</span> <span class="arrow down"></span></button> <button type="button" aria-label="规范" class="mobile-dropdown-title"><span class="title">规范</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/developer.html" class="nav-link">
  Developer
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/git.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/html.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/javascript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/vuejs.html" class="nav-link">
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/eggjs.html" class="nav-link">
  Egg.js
</a></li><li class="dropdown-item"><!----> <a href="/standards-recommendations/standard/mysql.html" class="nav-link">
  MySql
</a></li></ul></div></div><div class="nav-item"><a href="/standards-recommendations/library/" class="nav-link">
  代码库
</a></div><div class="nav-item"><a href="/standards-recommendations/case/" class="nav-link">
  典型案例
</a></div><div class="nav-item"><a href="/standards-recommendations/about/" class="nav-link">
  关于
</a></div> <a href="https://github.com/hilanmiao/standards-recommendations" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/standards-recommendations/standard/developer.html" class="sidebar-link">工程师规范</a></li><li><a href="/standards-recommendations/standard/git.html" aria-current="page" class="active sidebar-link">Git规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/standards-recommendations/standard/git.html#git-分支模型" class="sidebar-link">Git 分支模型</a></li><li class="sidebar-sub-header"><a href="/standards-recommendations/standard/git.html#提交信息规范" class="sidebar-link">提交信息规范</a></li><li class="sidebar-sub-header"><a href="/standards-recommendations/standard/git.html#约定式提交-1-0-0" class="sidebar-link">约定式提交 1.0.0</a></li><li class="sidebar-sub-header"><a href="/standards-recommendations/standard/git.html#示例" class="sidebar-link">示例</a></li><li class="sidebar-sub-header"><a href="/standards-recommendations/standard/git.html#约定式提交规范" class="sidebar-link">约定式提交规范</a></li><li class="sidebar-sub-header"><a href="/standards-recommendations/standard/git.html#为什么使用约定式提交" class="sidebar-link">为什么使用约定式提交</a></li><li class="sidebar-sub-header"><a href="/standards-recommendations/standard/git.html#faq" class="sidebar-link">FAQ</a></li><li class="sidebar-sub-header"><a href="/standards-recommendations/standard/git.html#关于" class="sidebar-link">关于</a></li><li class="sidebar-sub-header"><a href="/standards-recommendations/standard/git.html#用工具实现规范提交" class="sidebar-link">用工具实现规范提交</a></li><li class="sidebar-sub-header"><a href="/standards-recommendations/standard/git.html#徽章" class="sidebar-link">徽章</a></li></ul></li><li><a href="/standards-recommendations/standard/css.html" class="sidebar-link">CSS规范</a></li><li><a href="/standards-recommendations/standard/html.html" class="sidebar-link">HTML规范</a></li><li><a href="/standards-recommendations/standard/javascript.html" class="sidebar-link">JavaScript规范</a></li><li><a href="/standards-recommendations/standard/vuejs.html" class="sidebar-link">VueJs规范</a></li><li><a href="/standards-recommendations/standard/eggjs.html" class="sidebar-link">EggJs规范</a></li><li><a href="/standards-recommendations/standard/mysql.html" class="sidebar-link">MySql规范</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="git规范"><a href="#git规范" class="header-anchor">#</a> Git规范</h1> <h2 id="git-分支模型"><a href="#git-分支模型" class="header-anchor">#</a> Git 分支模型</h2> <h3 id="master分支"><a href="#master分支" class="header-anchor">#</a> master分支</h3> <p>master分支表示一个稳定的发布版本.</p> <ul><li>场景: 所有应用会跟随版本迭代, 在dev分支测试稳定后, 会合并到master分支, 并使用tag标记应用版本</li> <li>tag规范: <code>v{version}</code>, 例如v0.1.0</li> <li>人员: 由项目负责人进行审核合并, 普通开发者没有权限</li></ul> <h3 id="dev分支"><a href="#dev分支" class="header-anchor">#</a> dev分支</h3> <p>开发者主要工作的分支, 最新的特性或bug修复都会提交到这个分支. 开发者如果在该分支进行了提交，在push到远程之前应该先pull一下， 并尽量使用rebase模式，保证分支的简洁</p> <ul><li>命名规范: dev</li> <li>tag规范: 在dev分支中也可能会经历发布过程, 例如bug修复版本. 这里同样使用tag来标记这些发布. 例如v0.1.1</li> <li>提交规范：如果实在开发分支上进行开发，在推送到远程之前，应该使用<code>git rebase</code>形式更新本地分支。</li></ul> <h3 id="feature分支"><a href="#feature分支" class="header-anchor">#</a> feature分支</h3> <p>涉及多人协作或者大功能的开发, 应该从dev分支checkout出独立的feature分支, 避免干扰dev分支</p> <ul><li>场景:
<ul><li>涉及多人协作: 团队多个成员在同一个项目下负责开发不同的功能, 这时候每个成员在自己的feature分支独立开发</li> <li>大功能开发: 大功能开发跨越周期比较长, 需要多次迭代才会稳定. 这时候应该在独立的分支上开发. 方便跟踪历史记录, 也免于干扰dev分支的迭代和发布</li></ul></li> <li>命名规范
<ul><li>feature/name: name是功能名称</li> <li>feature/version: 这也是团队常见的模式, 当无法使用一个功能名称来描述时, 可以使用版本号作为’功能’</li></ul></li> <li>合并时机
<ol><li>当feature分支迭代稳定, 并通过测试后, 合并到dev分支. 合并到dev后, <strong>feature分支的生命周期就结束了</strong>. 后续bug修复和功能优化直接在dev开发</li> <li>当多个feature分支需要合并对外发布临时版本时. 合并到preview分支 . ⚠️这种情况不应该合并到dev分支, 因为feature分支可能还不稳定或未完成. 比如为了联调某些功能.</li></ol></li> <li>合并方式
<ul><li>不要使用fast-forward. 这样可以在分支图上查看到分支历史</li></ul></li></ul> <h3 id="preview分支"><a href="#preview分支" class="header-anchor">#</a> preview分支</h3> <p>临时的预览分支, preview分支用于临时合并feature分支, 这其中可能会修复某些bug或者冲突. 可以选择性地将这些提交cherrypick回feature分支. 当预览结束后就可以销毁preview分支</p> <h3 id="release分支"><a href="#release分支" class="header-anchor">#</a> release分支</h3> <p>遵循gitflow规范</p> <ul><li>场景: 需要为某个正式版本修复bug(hotFix)时, 从master的对应tag中checkout release分支</li> <li>命名规范: release/{version}</li> <li>如何修复
<ul><li>如果对应bug可以在dev分支直接被修复, 可以先提交到dev分支(或者已经修复了), 然后再cherrypick到release分支</li> <li>如果bug在新版本无法复现. 比如新版本升级了依赖. 那么在release分支直接修复即可</li></ul></li></ul> <hr> <h2 id="提交信息规范"><a href="#提交信息规范" class="header-anchor">#</a> 提交信息规范</h2> <p>一个好的提交信息, 会帮助你提高项目的整体质量.</p> <ul><li>why
<ul><li>格式统一的提交信息可以帮助自动化生成changelog</li> <li>版本库不只是存放代码的仓库, 也记录项目的开发记录. 这些记录应该可以帮助后来者快速地学习和回顾代码. 也应该方便其他协作者review你的代码</li></ul></li> <li>原则: 半年后, 你能看懂你的commit做了什么东西</li> <li>方式: 使用git commit(打开编辑器)而不是git commit -m</li> <li>必要信息
<ul><li>为什么进行这次提交?
<ul><li>提交改变了什么, 让其他reviewer更容易审核代码和忽略无关的改变</li></ul></li> <li>如何解决的问题?
<ul><li>问题是什么导致的？</li> <li>简短说明使用什么方式, 策略, 修复了问题.</li></ul></li> <li>变化可能影响哪些地方
<ul><li>说明变动功能的细节。 一个提交不应该做超过2个功能的变动</li></ul></li></ul></li></ul> <blockquote><p><a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" title="约定式提交 1.0.0 官方中文文档" target="_blank" rel="noopener noreferrer">约定式提交 1.0.0 官方中文文档<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
前半段直接引用官方文档的部分内容！</p></blockquote> <h2 id="约定式提交-1-0-0"><a href="#约定式提交-1-0-0" class="header-anchor">#</a> 约定式提交 1.0.0</h2> <p>约定式提交规范是一种基于提交信息的轻量级约定。
它提供了一组简单规则来创建清晰的提交历史；
这更有利于编写自动化工具。
通过在提交信息中描述功能、修复和破坏性变更，
使这种惯例与 <a href="http://semver.org" target="_blank" rel="noopener noreferrer">SemVer<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 相互对应。</p> <p>提交说明的结构如下所示：</p> <hr> <p>原文：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;type&gt;[optional scope]: &lt;description&gt;

[optional body]

[optional footer(s)]
</code></pre></div><p>译文：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;类型&gt;[可选 范围]: &lt;描述&gt;

[可选 正文]

[可选 脚注]
</code></pre></div><hr> <br>
提交说明包含了下面的结构化元素，以向类库使用者表明其意图：
<ol><li><strong>fix:</strong> <em>类型</em> 为 <code>fix</code> 的提交表示在代码库中修复了一个 bug（这和语义化版本中的 <a href="https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81" target="_blank" rel="noopener noreferrer"><code>PATCH</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 相对应）。</li> <li><strong>feat:</strong> <em>类型</em> 为 <code>feat</code> 的提交表示在代码库中新增了一个功能（这和语义化版本中的 <a href="https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81" target="_blank" rel="noopener noreferrer"><code>MINOR</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 相对应）。</li> <li><strong>BREAKING CHANGE:</strong> 在脚注中包含 <code>BREAKING CHANGE:</code> 或 &lt;类型&gt;(范围) 后面有一个 <code>!</code> 的提交，表示引入了破坏性 API 变更（这和语义化版本中的 <a href="https://semver.org/lang/zh-CN/#%E6%91%98%E8%A6%81" target="_blank" rel="noopener noreferrer"><code>MAJOR</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 相对应）。
破坏性变更可以是任意 <em>类型</em> 提交的一部分。</li> <li>除 <code>fix:</code> 和 <code>feat:</code> 之外，也可以使用其它提交 <em>类型</em> ，例如 <a href="https://github.com/conventional-changelog/commitlint/tree/master/%40commitlint/config-conventional" target="_blank" rel="noopener noreferrer">@commitlint/config-conventional<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>（基于 <a href="https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines" target="_blank" rel="noopener noreferrer">Angular 约定<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）中推荐的 <code>build:</code>、<code>chore:</code>、
<code>ci:</code>、<code>docs:</code>、<code>style:</code>、<code>refactor:</code>、<code>perf:</code>、<code>test:</code>，等等。</li> <li>脚注中除了 <code>BREAKING CHANGE: &lt;description&gt;</code> ，其它条目应该采用类似
<a href="https://git-scm.com/docs/git-interpret-trailers" target="_blank" rel="noopener noreferrer">git trailer format<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这样的惯例。</li></ol> <p>其它提交类型在约定式提交规范中并没有强制限制，并且在语义化版本中没有隐式影响（除非它们包含 BREAKING CHANGE）。
<br><br>
可以为提交类型添加一个围在圆括号内的范围，以为其提供额外的上下文信息。例如 <code>feat(parser): adds ability to parse arrays.</code>。</p> <h2 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h2> <h3 id="包含了描述并且脚注中有破坏性变更的提交说明"><a href="#包含了描述并且脚注中有破坏性变更的提交说明" class="header-anchor">#</a> 包含了描述并且脚注中有破坏性变更的提交说明</h3> <div class="language- extra-class"><pre class="language-text"><code>feat: allow provided config object to extend other configs

BREAKING CHANGE: `extends` key in config file is now used for extending other config files
</code></pre></div><h3 id="包含了-字符以提醒注意破坏性变更的提交说明"><a href="#包含了-字符以提醒注意破坏性变更的提交说明" class="header-anchor">#</a> 包含了 <code>!</code> 字符以提醒注意破坏性变更的提交说明</h3> <div class="language- extra-class"><pre class="language-text"><code>refactor!: drop support for Node 6
</code></pre></div><h3 id="包含了-和-breaking-change-脚注的提交说明"><a href="#包含了-和-breaking-change-脚注的提交说明" class="header-anchor">#</a> 包含了 <code>!</code> 和 BREAKING CHANGE 脚注的提交说明</h3> <div class="language- extra-class"><pre class="language-text"><code>refactor!: drop support for Node 6

BREAKING CHANGE: refactor to use JavaScript features not available in Node 6.
</code></pre></div><h3 id="不包含正文的提交说明"><a href="#不包含正文的提交说明" class="header-anchor">#</a> 不包含正文的提交说明</h3> <div class="language- extra-class"><pre class="language-text"><code>docs: correct spelling of CHANGELOG
</code></pre></div><h3 id="包含范围的提交说明"><a href="#包含范围的提交说明" class="header-anchor">#</a> 包含范围的提交说明</h3> <div class="language- extra-class"><pre class="language-text"><code>feat(lang): add polish language
</code></pre></div><h3 id="包含多行正文和多行脚注的提交说明"><a href="#包含多行正文和多行脚注的提交说明" class="header-anchor">#</a> 包含多行正文和多行脚注的提交说明</h3> <div class="language- extra-class"><pre class="language-text"><code>fix: correct minor typos in code

see the issue for details

on typos fixed.

Reviewed-by: Z
Refs #133
</code></pre></div><h2 id="约定式提交规范"><a href="#约定式提交规范" class="header-anchor">#</a> 约定式提交规范</h2> <p>本文中的关键词 “必须（MUST）”、“禁止（MUST NOT）”、“必要（REQUIRED）”、“应当（SHALL）”、“不应当（SHALL NOT）”、“应该（SHOULD）”、“不应该（SHOULD NOT）”、“推荐（RECOMMENDED）”、“可以（MAY）” 和 “可选（OPTIONAL）” ，其相关解释参考 <a href="https://www.ietf.org/rfc/rfc2119.txt" target="_blank" rel="noopener noreferrer">RFC 2119<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 。</p> <ol><li>每个提交都<strong>必须</strong>使用类型字段前缀，它由一个名词构成，诸如 <code>feat</code> 或 <code>fix</code> ，
其后接<strong>可选的</strong>范围字段，<strong>可选的</strong> <code>!</code>，以及<strong>必要的</strong>冒号（英文半角）和空格。</li> <li>当一个提交为应用或类库实现了新功能时，<strong>必须</strong>使用 <code>feat</code> 类型。</li> <li>当一个提交为应用修复了 bug 时，<strong>必须</strong>使用 <code>fix</code> 类型。</li> <li>范围字段<strong>可以</strong>跟随在类型字段后面。范围<strong>必须</strong>是一个描述某部分代码的名词，并用圆括号包围，例如： <code>fix(parser):</code></li> <li>描述字段<strong>必须</strong>直接跟在 &lt;类型&gt;(范围) 前缀的冒号和空格之后。
描述指的是对代码变更的简短总结，例如： <em>fix: array parsing issue when multiple spaces were contained in string</em> 。</li> <li>在简短描述之后，<strong>可以</strong>编写较长的提交正文，为代码变更提供额外的上下文信息。正文<strong>必须</strong>起始于描述字段结束的一个空行后。</li> <li>提交的正文内容自由编写，并<strong>可以</strong>使用空行分隔不同段落。</li> <li>在正文结束的一个空行之后，<strong>可以</strong>编写一行或多行脚注。每行脚注都<strong>必须</strong>包含
一个令牌（token），后面紧跟 <code>:&lt;space&gt;</code> 或 <code>&lt;space&gt;#</code> 作为分隔符，后面再紧跟令牌的值（受
<a href="https://git-scm.com/docs/git-interpret-trailers" target="_blank" rel="noopener noreferrer">git trailer convention<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 启发）。</li> <li>脚注的令牌<strong>必须</strong>使用 <code>-</code> 作为连字符，比如 <code>Acked-by</code> (这样有助于
区分脚注和多行正文)。有一种例外情况就是 <code>BREAKING CHANGE</code>，它<strong>可以</strong>被认为是一个令牌。</li> <li>脚注的值<strong>可以</strong>包含空格和换行，值的解析过程<strong>必须</strong>直到下一个脚注的令牌/分隔符出现为止。</li> <li>破坏性变更<strong>必须</strong>在提交信息中标记出来，要么在 &lt;类型&gt;(范围) 前缀中标记，要么作为脚注的一项。</li> <li>包含在脚注中时，破坏性变更<strong>必须</strong>包含大写的文本 <code>BREAKING CHANGE</code>，后面紧跟着冒号、空格，然后是描述，例如：
<em>BREAKING CHANGE: environment variables now take precedence over config files</em> 。</li> <li>包含在 &lt;类型&gt;(范围) 前缀时，破坏性变更<strong>必须</strong>通过把 <code>!</code> 直接放在 <code>:</code> 前面标记出来。
如果使用了 <code>!</code>，那么脚注中<strong>可以</strong>不写 <code>BREAKING CHANGE:</code>，
同时提交信息的描述中<strong>应该</strong>用来描述破坏性变更。</li> <li>在提交说明中，<strong>可以</strong>使用 <code>feat</code> 和 <code>fix</code> 之外的类型，比如：<em>docs: updated ref docs.</em> 。</li> <li>工具的实现必须<strong>不区分</strong>大小写地解析构成约定式提交的信息单元，只有 <code>BREAKING CHANGE</code> <strong>必须</strong>是大写的。</li> <li>BREAKING-CHANGE 作为脚注的令牌时<strong>必须</strong>是 BREAKING CHANGE 的同义词。</li></ol> <h2 id="为什么使用约定式提交"><a href="#为什么使用约定式提交" class="header-anchor">#</a> 为什么使用约定式提交</h2> <ul><li>自动化生成 CHANGELOG。</li> <li>基于提交的类型，自动决定语义化的版本变更。</li> <li>向同事、公众与其他利益关系者传达变化的性质。</li> <li>触发构建和部署流程。</li> <li>让人们探索一个更加结构化的提交历史，以便降低对你的项目做出贡献的难度。</li></ul> <h2 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h2> <h3 id="在初始开发阶段我该如何处理提交说明"><a href="#在初始开发阶段我该如何处理提交说明" class="header-anchor">#</a> 在初始开发阶段我该如何处理提交说明？</h3> <p>我们建议你按照假设你已发布了产品那样来处理。因为通常总 <em>有人</em> 使用你的软件，即便那是你软件开发的同事们。他们会希望知道诸如修复了什么、哪里不兼容等信息。</p> <h3 id="提交标题中的类型是大写还是小写"><a href="#提交标题中的类型是大写还是小写" class="header-anchor">#</a> 提交标题中的类型是大写还是小写?</h3> <p>大小写都可以，但最好是一致的。</p> <h3 id="如果提交符合多种类型我该如何操作"><a href="#如果提交符合多种类型我该如何操作" class="header-anchor">#</a> 如果提交符合多种类型我该如何操作？</h3> <p>回退并尽可能创建多次提交。约定式提交的好处之一是能够促使我们做出更有组织的提交和 PR。</p> <h3 id="这不会阻碍快速开发和迭代吗"><a href="#这不会阻碍快速开发和迭代吗" class="header-anchor">#</a> 这不会阻碍快速开发和迭代吗？</h3> <p>它阻碍的是以杂乱无章的方式快速前进。它助你能在横跨多个项目以及和多个贡献者协作时长期地快速演进。</p> <h3 id="约定式提交会让开发者受限于提交的类型吗-因为他们会想着已提供的类型"><a href="#约定式提交会让开发者受限于提交的类型吗-因为他们会想着已提供的类型" class="header-anchor">#</a> 约定式提交会让开发者受限于提交的类型吗（因为他们会想着已提供的类型）？</h3> <p>约定式提交鼓励我们更多地使用某些类型的提交，比如 <code>fixes</code>。除此之外，约定式提交的灵活性也允许你的团队使用自己的类型，并随着时间的推移更改这些类型。</p> <h3 id="这和-semver-有什么关联呢"><a href="#这和-semver-有什么关联呢" class="header-anchor">#</a> 这和 SemVer 有什么关联呢？</h3> <p><code>fix</code> 类型提交应当对应到 <code>PATCH</code> 版本。<code>feat</code> 类型提交应该对应到 <code>MINOR</code> 版本。带有 <code>BREAKING CHANGE</code> 的提交不管类型如何，都应该对应到 <code>MAJOR</code> 版本。</p> <h3 id="我对约定式提交做了形如-jameswomack-conventional-commit-spec-的扩展-该如何版本化管理这些扩展呢"><a href="#我对约定式提交做了形如-jameswomack-conventional-commit-spec-的扩展-该如何版本化管理这些扩展呢" class="header-anchor">#</a> 我对约定式提交做了形如 <code>@jameswomack/conventional-commit-spec</code> 的扩展，该如何版本化管理这些扩展呢？</h3> <p>我们推荐使用 SemVer 来发布你对于这个规范的扩展（并鼓励你创建这些扩展！）</p> <h3 id="如果我不小心使用了错误的提交类型-该怎么办呢"><a href="#如果我不小心使用了错误的提交类型-该怎么办呢" class="header-anchor">#</a> 如果我不小心使用了错误的提交类型，该怎么办呢？</h3> <h4 id="当你使用了在规范中但错误的类型时-例如将-feat-写成了-fix"><a href="#当你使用了在规范中但错误的类型时-例如将-feat-写成了-fix" class="header-anchor">#</a> 当你使用了在规范中但错误的类型时，例如将 <code>feat</code> 写成了 <code>fix</code></h4> <p>在合并或发布这个错误之前，我们建议使用 <code>git rebase -i</code> 来编辑提交历史。而在发布之后，根据你使用的工具和流程不同，会有不同的清理方案。</p> <h4 id="当使用了-不在-规范中的类型时-例如将-feat-写成了-feet"><a href="#当使用了-不在-规范中的类型时-例如将-feat-写成了-feet" class="header-anchor">#</a> 当使用了 <em>不在</em> 规范中的类型时，例如将 <code>feat</code> 写成了 <code>feet</code></h4> <p>在最坏的场景下，即便提交没有满足约定式提交的规范，也不会是世界末日。这只意味着这个提交会被基于规范的工具错过而已。</p> <h3 id="所有的贡献者都需要使用约定式提交规范吗"><a href="#所有的贡献者都需要使用约定式提交规范吗" class="header-anchor">#</a> 所有的贡献者都需要使用约定式提交规范吗？</h3> <p>并不！如果你使用基于 squash 的 Git 工作流，主管维护者可以在合并时清理提交信息——这不会对普通提交者产生额外的负担。
有种常见的工作流是让 git 系统自动从 pull request 中 squash 出提交，并向主管维护者提供一份表单，用以在合并时输入合适的 git 提交信息。</p> <h3 id="约定式提交规范中如何处理还原-revert-提交"><a href="#约定式提交规范中如何处理还原-revert-提交" class="header-anchor">#</a> 约定式提交规范中如何处理还原（revert）提交?</h3> <p>还原提交（Reverting）会比较复杂：你还原的是多个提交吗？如果你还原了一个功能模块，下次发布的应该是补丁吗？</p> <p>约定式提交不能明确的定义还原行为。所以我们把这个问题留给工具开发者，
基于 <em>类型</em> 和 <em>脚注</em> 的灵活性来开发他们自己的还原处理逻辑。</p> <p>一种建议是使用 <code>revert</code> 类型，和一个指向被还原提交摘要的脚注：</p> <div class="language- extra-class"><pre class="language-text"><code>revert: let us never again speak of the noodle incident

Refs: 676104e, a215868
</code></pre></div><h2 id="关于"><a href="#关于" class="header-anchor">#</a> 关于</h2> <p>约定式提交规范受到了 <a href="https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit" target="_blank" rel="noopener noreferrer">Angular 提交准则<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的启发，并在很大程度上以其为依据。</p> <h2 id="用工具实现规范提交"><a href="#用工具实现规范提交" class="header-anchor">#</a> 用工具实现规范提交</h2> <h3 id="commitizen"><a href="#commitizen" class="header-anchor">#</a> commitizen</h3> <p><a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">commitizen/cz-cli<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: Node.js 工具，用于创建遵循约定式提交规范的提交信息。</p> <div class="language- extra-class"><pre class="language-text"><code># 全局安装
$ npm install -g commitizen
</code></pre></div><p><code>Commitizen</code>支持多种不同的提交规范，可以安装和配置不同的适配器实现。以<code>Conventional Commit:cz-conventional-changelog(一个符合 Angular团队规范的 preset)</code>规范为例</p> <div class="language- extra-class"><pre class="language-text"><code># 本地安装（不是所有项目都要符合规范，所以用本地配置更灵活）
commitizen init cz-conventional-changelog --save-dev --save-exact
</code></pre></div><p>安装完成后，查看是否在<code>package.json</code>中已加入<code>cz-conventional-changelog</code>信息：</p> <div class="language- extra-class"><pre class="language-text"><code>...
...
  &quot;devDependencies&quot;: {
    &quot;cz-conventional-changelog&quot;: &quot;^3.0.2&quot;
  },
  &quot;config&quot;: {
    &quot;commitizen&quot;: {
      &quot;path&quot;: &quot;./node_modules/cz-conventional-changelog&quot;
    }
  }
}
</code></pre></div><p>安装完成后，使用<code>git-cz</code>替代<code>git commit</code>测试提交操作，通过提示信息辅助你完成标准化的提交日志。</p> <div class="language- extra-class"><pre class="language-text"><code>E:\workSpace\standards-recommendations&gt;git-cz
cz-cli@4.2.3, cz-conventional-changelog@3.3.0

? Select the type of change that you're committing: (Use arrow keys)
&gt; feat:     A new feature
  fix:      A bug fix
  docs:     Documentation only changes
  style:    Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)
  refactor: A code change that neither fixes a bug nor adds a feature
  perf:     A code change that improves performance
  test:     Adding missing tests or correcting existing tests
(Move up and down to reveal more choices)

</code></pre></div><h3 id="commitlint"><a href="#commitlint" class="header-anchor">#</a> commitlint</h3> <p><a href="https://github.com/conventional-changelog/commitlint" target="_blank" rel="noopener noreferrer">commitlint<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: 可以检查 commit messages 是否符合常规提交格式，也需要一份校验配置，推荐 <code>@commitlint/config-conventional</code>(符合 Angular团队规范)</p> <div class="language- extra-class"><pre class="language-text"><code>npm i --save-dev @commitlint/config-conventional @commitlint/cli
</code></pre></div><p>在项目根目录创建 commitlint.config.js 文件并设置校验规则：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@commitlint/config-conventional&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// rules 里面可以设置一些自定义的校验规则</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>也许 Angular 的那套规范我们不习惯, 那么可以通过指定 Adapter <a href="https://github.com/leoforfree/cz-customizable" target="_blank" rel="noopener noreferrer">cz-customizable<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>指定一套符合自己团队的规范.你也可以使用自定义配置，如：把配置选项变成中文的。</p> <h3 id="husky"><a href="#husky" class="header-anchor">#</a> husky</h3> <p><a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：可以让 <code>git hooks</code> 变得更简单，在特定的重要动作触发自定义脚本。比如：当我们在提交或者推送代码的时候，可以使用它验证提交信息、运行测试、格式化代码、触发 CI/CD 等。</p> <p>官网文档：https://typicode.github.io/husky/#/?id=usage （写作时安装版本6.x，和4.x不兼容）</p> <p>官方提供了一键安装和配置脚本，推荐使用。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>npx husky-init <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> <span class="token function">install</span>       <span class="token comment"># npm</span>
npx husky-init <span class="token operator">&amp;&amp;</span> <span class="token function">yarn</span>              <span class="token comment"># Yarn 1</span>
<span class="token function">yarn</span> dlx husky-init --yarn2 <span class="token operator">&amp;&amp;</span> <span class="token function">yarn</span> <span class="token comment"># Yarn 2</span>
</code></pre></div><p>它将会生成<code>.husky</code>目录，修改<code>package.json</code>并创建一个<code>pre-commit</code>示例钩子文件。默认情况下当你提交的时候它会执行<code>npm test</code>（以后这里可以配置eslint），如下图：</p> <p><img src="https://oscimg.oschina.net/oscnet/up-986025901160ffa73a69eef80aa374b0a5f.png" alt=""> <img src="https://oscimg.oschina.net/oscnet/up-593b69663bb3e1519747983574c48bd74f6.png" alt=""></p> <p>我们<code>package.json scripts</code>中没有<code>test</code>脚本，所以运行<code>git commit...</code>会出错，如下图，所以我们暂时注释掉<code>npm test</code>或者先删掉<code>pre-commit</code>文件。</p> <div class="language- extra-class"><pre class="language-text"><code>E:\workSpace\standards-recommendations&gt;git commit -m &quot;Keep calm and commit&quot;

&gt; standards-recommendations@1.0.0 test E:\workSpace\standards-recommendations
&gt; echo 'Error: no test specified'

'Error: no test specified'
[master 2605312] Keep calm and commit
 1 file changed, 0 insertions(+), 0 deletions(-)
 delete mode 100644 husky.config.js

</code></pre></div><h3 id="创建commit-msg钩子"><a href="#创建commit-msg钩子" class="header-anchor">#</a> 创建commit-msg钩子</h3> <p>使用<code>husky add</code>命令创建 ./husky/commit-msg 钩子：</p> <div class="language- extra-class"><pre class="language-text"><code># npm
npx husky add .husky/commit-msg 'npx --no-install commitlint --edit &quot;$1&quot;'

# yarn
yarn husky add .husky/commit-msg 'npx --no-install commitlint --edit &quot;$1&quot;'

</code></pre></div><blockquote><p>windows下不是很好使。... 'npx --no-...'，中间有空格不能正确识别？只能<code>npx husky add .husky/commit-msg</code>先创建文件再手动修改内容了。</p></blockquote> <p>附上目前git支持的hook名称：
<img src="https://oscimg.oschina.net/oscnet/up-bbaa51d611c7c4b12dfbb280682db36fcfe.png" alt=""></p> <h3 id="git-commit-测试"><a href="#git-commit-测试" class="header-anchor">#</a> git commit 测试</h3> <div class="language- extra-class"><pre class="language-text"><code>E:\workSpace\standards-recommendations&gt;git commit -m &quot;测试comimit-msg钩子&quot;
⧗   input: 测试comimit-msg钩子
✖   subject may not be empty [subject-empty]
✖   type may not be empty [type-empty]

✖   found 2 problems, 0 warnings
ⓘ   Get help: https://github.com/conventional-changelog/commitlint/#what-is-commitlint

husky - commit-msg hook exited with code 1 (error)

</code></pre></div><p>如果某一次提交想要禁用husky，可以添加参数--no-verify</p> <div class="language- extra-class"><pre class="language-text"><code>$ git commit --no-verify -m &quot;xxx&quot;
</code></pre></div><h2 id="徽章"><a href="#徽章" class="header-anchor">#</a> 徽章</h2> <p>在<code>README</code>中添加<code>commitizen</code>友好徽章
<a href="http://commitizen.github.io/cz-cli/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/commitizen-friendly-brightgreen.svg" alt="Commitizen friendly"><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>在<code>README</code>中添加规范提交徽章
<a href="https://conventionalcommits.org" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/Conventional%20Commits-1.0.0-yellow.svg" alt="Conventional Commits"><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/hilanmiao/standards-recommendations/edit/master/docs/standard/git.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">4/15/2021, 6:05:13 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/standards-recommendations/standard/developer.html" class="prev">
        工程师规范
      </a></span> <span class="next"><a href="/standards-recommendations/standard/css.html">
        CSS规范
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/standards-recommendations/assets/js/app.bcf4ed73.js" defer></script><script src="/standards-recommendations/assets/js/2.3f93e23a.js" defer></script><script src="/standards-recommendations/assets/js/19.8a5ec652.js" defer></script>
  </body>
</html>
