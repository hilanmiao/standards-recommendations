(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{334:function(t,a,s){},367:function(t,a,s){"use strict";s(334)},386:function(t,a,s){"use strict";s.r(a);s(367);var e=s(26),v=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"eggjs规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eggjs规范"}},[t._v("#")]),t._v(" EggJs规范")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("Linux 大小写敏感\nLinux _下划线是主流")])]),t._v(" "),s("h2",{attrs:{id:"部署运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署运行"}},[t._v("#")]),t._v(" 部署运行")]),t._v(" "),s("p",[t._v("拷贝以下文件或目录到服务器相应位置")]),t._v(" "),s("ul",[s("li",[t._v("app (代码)")]),t._v(" "),s("li",[t._v("config (配置)")]),t._v(" "),s("li",[t._v("app.js (启动文件)")]),t._v(" "),s("li",[t._v("package.json (依赖)")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install\nnpm run start\n")])])]),s("h2",{attrs:{id:"命名规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命名规则"}},[t._v("#")]),t._v(" 命名规则")]),t._v(" "),s("ul",[s("li",[t._v("项目 "),s("code",[t._v("kebab-case")])]),t._v(" "),s("li",[t._v("目录/文件夹 "),s("code",[t._v("kebab-case")])]),t._v(" "),s("li",[t._v("文件 "),s("code",[t._v("snake_case")])]),t._v(" "),s("li",[t._v("数据库 库名、表名、字段名均使用 "),s("code",[t._v("snake_case")])])]),t._v(" "),s("h2",{attrs:{id:"目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录"}},[t._v("#")]),t._v(" 目录")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("egg-project\n├── app\n│   ├── controller\n│   ├── extend\n│   ├── middleware\n│   ├── model\n│   ├── public\n│   ├── router\n│   ├── schedule\n│   ├── service\n│   ├── view\n|   ├── router.js\n├── config\n├── logs\n├── node_modules\n├── run\n├── typings\n├── .eslintrc\n├── .gitingore\n├── .sequelizerc\n├── app.js\n├── agent.js\n└── package.json\n")])])]),s("p",[t._v("以上目录约定如下：")]),t._v(" "),s("ul",[s("li",[t._v("app/controller/ 用于解析用户输入，处理后返回响应结果。")]),t._v(" "),s("li",[t._v("app/extend/ 用于框架内部对象的拓展(request,response,context,application)和工具类(helper)的编写。")]),t._v(" "),s("li",[t._v("app/middleware/ 用于编写中间件。")]),t._v(" "),s("li",[t._v("app/model/ 用于放置数据模型。")]),t._v(" "),s("li",[t._v("app/public/ 用于放置静态文件。")]),t._v(" "),s("li",[t._v("app/router/ 用户放置分离的路由。")]),t._v(" "),s("li",[t._v("app/schedule/ 用于放置定时任务。")]),t._v(" "),s("li",[t._v("app/service/ 用于编写业务逻辑。")]),t._v(" "),s("li",[t._v("app/view/ 用于放置模板文件。")]),t._v(" "),s("li",[t._v("app/router.js 用于配置URL路由规则。")]),t._v(" "),s("li",[t._v("config/ 用于放置整个项目的配置。")]),t._v(" "),s("li",[t._v("logs/ 日志存放目录。")]),t._v(" "),s("li",[t._v("node_modules/ 项目所需要的模块文件。")]),t._v(" "),s("li",[t._v("run/ 项目运行时，生成的配置文件(可忽略)。")]),t._v(" "),s("li",[t._v("typings/ 运行时自动生成的 typeScript 文件(暂不使用typeScript开发)。")]),t._v(" "),s("li",[t._v(".eslintrc 插件 eslint 的配置文件。")]),t._v(" "),s("li",[t._v(".gitingore git 忽略跟踪文件或目录的规则。")]),t._v(" "),s("li",[t._v(".sequelizerc 插件 egg-sequelize 的数据迁移配置文件（暂时不用）。")]),t._v(" "),s("li",[t._v("app.js 用于自定义启动时的初始化工作。")]),t._v(" "),s("li",[t._v("agent.js 用于自定义启动时的初始化工作。")]),t._v(" "),s("li",[t._v("package.json 定义项目的模块及配置信息等。")])]),t._v(" "),s("h2",{attrs:{id:"restful-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#restful-api"}},[t._v("#")]),t._v(" RESTFul Api")]),t._v(" "),s("h3",{attrs:{id:"状态码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#状态码"}},[t._v("#")]),t._v(" 状态码")]),t._v(" "),s("p",[t._v("http 状态码 统一使用200， 使用自定义状态码进行业务处理")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("99999")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#版本"}},[t._v("#")]),t._v(" 版本")]),t._v(" "),s("p",[t._v("通过版本号可以区分api的版本。")]),t._v(" "),s("ul",[s("li",[t._v("通过/api/v1/*代表v1版本")]),t._v(" "),s("li",[t._v("通过/api/v2/*代表v2版本")])]),t._v(" "),s("h3",{attrs:{id:"url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url"}},[t._v("#")]),t._v(" URL")]),t._v(" "),s("ul",[s("li",[t._v("只能是名词不能是动词")]),t._v(" "),s("li",[t._v("小写字符")]),t._v(" "),s("li",[t._v("不可使用下划线'_'，可以使用连字符'-'")]),t._v(" "),s("li",[t._v("CRUD不可出现在URL中")]),t._v(" "),s("li",[t._v("参数列表要用encode")]),t._v(" "),s("li",[t._v("避免层级过深的URI，尽量使用查询参数代替路径中的实体导航，如GET /user?sex=female&age=30")])]),t._v(" "),s("p",[t._v("具体形式如下：")]),t._v(" "),s("ol",[s("li",[t._v("/api/{资源名}/{描述名}")]),t._v(" "),s("li",[t._v("/api/{资源名}/{对象id}/{描述名}\n例子：")])]),t._v(" "),s("ul",[s("li",[t._v("GET http://www.demo.com/api/v1/user/my/login-log 获取我的登录日志")]),t._v(" "),s("li",[t._v("GET http://www.demo.com/api/v1/user/1 获取用户1的信息")]),t._v(" "),s("li",[t._v("POST http://www.demo.com/api/v1/user/login 登录")]),t._v(" "),s("li",[t._v("PUT http://www.demo.com/api/v1/user/1 更新用户1的全部信息")]),t._v(" "),s("li",[t._v("DELETE http://www.demo.com/api/v1/user/1 删除用户1")]),t._v(" "),s("li",[t._v("PATCH http://www.demo.com/api/v1/user/1 更新用户1部分信息")]),t._v(" "),s("li",[t._v("GET http://www.demo.com/api/v1/user/1/role 获取用户1的权限信息、")])])])}),[],!1,null,null,null);a.default=v.exports}}]);